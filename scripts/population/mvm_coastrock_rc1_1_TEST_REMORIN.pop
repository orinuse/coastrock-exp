#base robot_standard.pop
#base robot_giant.pop
#base robot_remorin.pop

WaveSchedule
{
	StartingCurrency 700
	RespawnWaveTime 6
	CanBotsAttackWhileInSpawnRoom no
	Advanced 1
	
	Templates
	{
		Sunny_MGMedic_Shield {
			Health 650
			Scale 1.3
			Tag orin_shield
			Template Remorin_Medic_Shield
            Template gCHAR_MINI
		}
	}
	
    Mission
	{
		Objective DestroySentries
		Where spawnbot
		BeginAtWave 1
		RunForThisManyWaves 6
		InitialCooldown 15
		CooldownTime 30
		DesiredCount 1
		TFBot 
        { 
            Template Remorin_SentryBuster 
        }
	}
    Wave
	{
		InitWaveOutput
		{
			Target gamerules
			Action RunScriptFile
			Param "exp_sunny_side.nut"
		}
		StartWaveOutput
		{
			Target wave_start_endurance_relay
			Action Trigger
		}
		DoneOutput
		{
			Target wave_finished_relay
			Action Trigger
		}
		WaveSpawn
		{
			Name "W1_A"
			Where spawnbot_tunnel
			WaitBetweenSpawns 1.25
			TotalCount 1
			MaxActive 1
			SpawnCount 1
			TotalCurrency 50
			FirstSpawnOutput
            {
                Target gamerules
                Action RunScriptCode
                Param "RunBossLogic(2,3,5)"
            }
			TFBot
			{
				Class Sniper
				Health 12000
				Name "The Pirate from Space"
				ClassIcon sniper_bow
				Tag orin_boss
				BehaviorModifiers Push

				EventChangeAttributes
				{	
					Default
					{
						Skill Expert
						Tag orin_boss
						Tag bot_giant
						Item "The Fortified Compound"
						Item "Sniper's Snipin' Glass"
						Item "Lord Cockswain's Novelty Mutton Chops and Pipe"
						Item "The Buccaneer's Bicorne"
						Attributes MiniBoss
						Attributes UseBossHealthBar
						ItemAttributes
						{
							ItemName "The Fortified Compound"
							"override projectile type" 1
							"damage bonus"	3
							"fire rate bonus" 0.01
							"sniper fires tracer" 1
							"projectile penetration" 1	// has tracer, makes sense
							"gesture speed increase" 2
							"ragdolls become ash" 1
						}
						CharacterAttributes
						{
							"move speed penalty"	0.35
							"damage force reduction" 0.0
							"airblast vulnerability multiplier" 0.00
							"airblast vertical vulnerability multiplier" 0.00
							"override footstep sound set" 7
							"rage giving scale"	0.4
						}
					}
					Phase1Pattern2
					{
						Skill Expert
						Tag orin_boss
						Tag bot_giant
						Item "The Fortified Compound"
						Item "Sniper's Snipin' Glass"
						Item "Lord Cockswain's Novelty Mutton Chops and Pipe"
						Item "The Buccaneer's Bicorne"
						ItemAttributes
						{
							ItemName "The Fortified Compound"
							"override projectile type" 12	// cm5k doesn't crash
							"damage bonus HIDDEN"	0.7
							"fire rate bonus" 0.4
							"dmg bonus vs buildings" 2.0
							"Set DamageType Ignite" 1
							"damage bonus vs burning" 1.5
							"damage blast push" 5
							"Blast radius increased"	1.15
							"projectile speed decreased" 0.65	// gahhh it doesnt work with overriden projectiles
							"gesture speed increase" 1.5
							"no self blast dmg" 2
						}
						CharacterAttributes
						{
							"move speed penalty"	0.35
							"damage force reduction" 0.0
							"airblast vulnerability multiplier" 0.00
							"airblast vertical vulnerability multiplier" 0.00
							"override footstep sound set" 7
							"rage giving scale"	0.4
						}
					}
					Phase1Pattern3
					{
						Skill Expert
						Tag orin_boss
						Tag bot_giant
						Item "The Fortified Compound"
						Item "Sniper's Snipin' Glass"
						Item "Lord Cockswain's Novelty Mutton Chops and Pipe"
						Item "The Buccaneer's Bicorne"
						ItemAttributes
						{
							ItemName "The Fortified Compound"
							"override projectile type" 17 //cannon ball attribute
							"damage bonus HIDDEN"	1.5
							"fire rate bonus" 0.001
							"gesture speed increase" 2
							"damage blast push"	30
						}
						CharacterAttributes
						{
							"move speed penalty"	0.35
							"damage force reduction" 0.0
							"airblast vulnerability multiplier" 0.00
							"airblast vertical vulnerability multiplier" 0.00
							"override footstep sound set" 7
							"rage giving scale"	0.4
						}
					}
					Phase2Pattern1
					{
						Skill Normal
						Tag orin_boss
						Tag bot_giant
						WeaponRestrictions	SecondaryOnly
						Attributes	"AlwaysFireWeapon"
						Item jarate
						ItemAttributes
						{
							ItemName	jarate
							"effect bar recharge rate increased"	0.125
							"deploy time increased" 0.0
						}
						CharacterAttributes
						{
							"move speed penalty"	0.6
							"damage force reduction" 0.0
							"airblast vulnerability multiplier" 0.00
							"airblast vertical vulnerability multiplier" 0.00
							"override footstep sound set" 7
							"rage giving scale"	0.4
						}
					}
					Phase2Pattern2
					{
						Skill Normal
						Tag orin_boss
						Tag bot_giant
						Item "The Bushwacka"
						WeaponRestrictions MeleeOnly
						ItemAttributes
						{
							ItemName "The Bushwacka"
							"fire rate bonus" 0.6
							"damage bonus" 1.5
							"melee range multiplier" 1.5
						}
						CharacterAttributes
						{
							"move speed penalty"	0.6
							"damage force reduction" 0.0
							"airblast vulnerability multiplier" 0.00
							"airblast vertical vulnerability multiplier" 0.00
							"override footstep sound set" 7
							"rage giving scale"	0.4
						}
					}
					Phase2Pattern3
					{
						Skill Normal
						Tag orin_boss
						Tag bot_giant
						Item "The Bushwacka"
						WeaponRestrictions MeleeOnly
						ItemAttributes
						{
							ItemName "The Bushwacka"
							"fire rate bonus" 0.6
							"damage bonus" 1.5
							"melee range multiplier" 1.5
						}
						CharacterAttributes
						{
							"move speed penalty"	0.6
							"damage force reduction" 0.0
							"airblast vulnerability multiplier" 0.00
							"airblast vertical vulnerability multiplier" 0.00
							"override footstep sound set" 7
							"rage giving scale"	0.4
						}
					}
				}
			}
		}
    }
    Wave
	{
		InitWaveOutput
		{
			Target gamerules
			Action RunScriptFile
			Param "exp_sunny_side.nut"
		}
		StartWaveOutput
		{
			Target wave_start_endurance_relay
			Action Trigger
		}
		DoneOutput
		{
			Target wave_finished_relay
			Action Trigger
		}
		WaveSpawn
		{
			Name "W1_A"
			Where spawnbot_tunnel
			WaitBetweenSpawns 5
			TotalCount 10
			MaxActive 10
			SpawnCount 1
			TotalCurrency 50
			TFBot
            {
				Class Engineer
				TeleportWhere spawnbot
				Attributes TeleportToHint
            }
		}
		WaveSpawn
		{
			Name "W1_A"	
			Where spawnbot
			WaitBetweenSpawnsAfterDeath 8
			TotalCount 1
			MaxActive 1
			SpawnCount 1
			TotalCurrency 50
			Support 1
			TFBot
            {
				Template Remorin_Scout_Sandman
            }
		}
    }
	Wave
	{
		InitWaveOutput
		{
			Target gamerules
			Action RunScriptFile
			Param "exp_sunny_side.nut"
		}
		StartWaveOutput
		{
			Target wave_start_endurance_relay
			Action Trigger
		}
		DoneOutput
		{
			Target wave_finished_relay
			Action Trigger
		}
		WaveSpawn
		{
			Name "W2_B"
			Where spawnbot_tunnel
			WaitForAllSpawned	"W2_Tank"
			WaitForAllDead		"W2_A"
			WaitBeforeStarting 0
			WaitBetweenSpawns 30
			TotalCount 10
			MaxActive 10
			SpawnCount 5
			TotalCurrency 50
			Squad
			{
				ShouldPreserveSquad 1
				FormationSize 75
				TFBot
				{
					Template Sunny_MGMedic_Shield
				}
				TFBot
				{
					Template T_TFBot_Giant_Soldier_Crit
				}
				TFBot
				{
					Template T_TFBot_Sniper_Huntsman
				}
				TFBot
				{
					Template T_TFBot_Sniper_Huntsman
				}
				TFBot
				{
					Template T_TFBot_Sniper_Huntsman
				}
			}
		}
	}
}